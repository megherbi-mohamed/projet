var travailleRating = document.querySelectorAll('#travaille_rating i');
for (let i = 0; i < 5; i++) {
    travailleRating[i].addEventListener('click',()=>{
        if (i == 4) {
            travailleRating[4].className = "fas fa-star";
            travailleRating[3].className = "far fa-star";
            travailleRating[2].className = "far fa-star";
            travailleRating[1].className = "far fa-star";
            travailleRating[0].className = "far fa-star";
        }
        else if (i == 3) {
            travailleRating[4].className = "fas fa-star";
            travailleRating[3].className = "fas fa-star";
            travailleRating[2].className = "far fa-star";
            travailleRating[1].className = "far fa-star";
            travailleRating[0].className = "far fa-star";
        }
        else if (i == 2){
            travailleRating[4].className = "fas fa-star";
            travailleRating[3].className = "fas fa-star";
            travailleRating[2].className = "fas fa-star";
            travailleRating[1].className = "far fa-star";
            travailleRating[0].className = "far fa-star";
        }
        else if (i == 1){
            travailleRating[4].className = "fas fa-star";
            travailleRating[3].className = "fas fa-star";
            travailleRating[2].className = "fas fa-star";
            travailleRating[1].className = "fas fa-star";
            travailleRating[0].className = "far fa-star";
        }
        else if (i == 0){
            travailleRating[4].className = "fas fa-star";
            travailleRating[3].className = "fas fa-star";
            travailleRating[2].className = "fas fa-star";
            travailleRating[1].className = "fas fa-star";
            travailleRating[0].className = "fas fa-star";
        }
    })
}

var rapiditeRating = document.querySelectorAll('#rapidite_rating i');
for (let i = 0; i < 5; i++) {
    rapiditeRating[i].addEventListener('click',()=>{
        if (i == 4) {
            rapiditeRating[4].className = "fas fa-star";
            rapiditeRating[3].className = "far fa-star";
            rapiditeRating[2].className = "far fa-star";
            rapiditeRating[1].className = "far fa-star";
            rapiditeRating[0].className = "far fa-star";
        }
        else if (i == 3) {
            rapiditeRating[4].className = "fas fa-star";
            rapiditeRating[3].className = "fas fa-star";
            rapiditeRating[2].className = "far fa-star";
            rapiditeRating[1].className = "far fa-star";
            rapiditeRating[0].className = "far fa-star";
        }
        else if (i == 2){
            rapiditeRating[4].className = "fas fa-star";
            rapiditeRating[3].className = "fas fa-star";
            rapiditeRating[2].className = "fas fa-star";
            rapiditeRating[1].className = "far fa-star";
            rapiditeRating[0].className = "far fa-star";
        }
        else if (i == 1){
            rapiditeRating[4].className = "fas fa-star";
            rapiditeRating[3].className = "fas fa-star";
            rapiditeRating[2].className = "fas fa-star";
            rapiditeRating[1].className = "fas fa-star";
            rapiditeRating[0].className = "far fa-star";
        }
        else if (i == 0){
            rapiditeRating[4].className = "fas fa-star";
            rapiditeRating[3].className = "fas fa-star";
            rapiditeRating[2].className = "fas fa-star";
            rapiditeRating[1].className = "fas fa-star";
            rapiditeRating[0].className = "fas fa-star";
        }
    })
}

var disciplineRating = document.querySelectorAll('#discipline_rating i');
for (let i = 0; i < 5; i++) {
    disciplineRating[i].addEventListener('click',()=>{
        if (i == 4) {
            disciplineRating[4].className = "fas fa-star";
            disciplineRating[3].className = "far fa-star";
            disciplineRating[2].className = "far fa-star";
            disciplineRating[1].className = "far fa-star";
            disciplineRating[0].className = "far fa-star";
        }
        else if (i == 3) {
            disciplineRating[4].className = "fas fa-star";
            disciplineRating[3].className = "fas fa-star";
            disciplineRating[2].className = "far fa-star";
            disciplineRating[1].className = "far fa-star";
            disciplineRating[0].className = "far fa-star";
        }
        else if (i == 2){
            disciplineRating[4].className = "fas fa-star";
            disciplineRating[3].className = "fas fa-star";
            disciplineRating[2].className = "fas fa-star";
            disciplineRating[1].className = "far fa-star";
            disciplineRating[0].className = "far fa-star";
        }
        else if (i == 1){
            disciplineRating[4].className = "fas fa-star";
            disciplineRating[3].className = "fas fa-star";
            disciplineRating[2].className = "fas fa-star";
            disciplineRating[1].className = "fas fa-star";
            disciplineRating[0].className = "far fa-star";
        }
        else if (i == 0){
            disciplineRating[4].className = "fas fa-star";
            disciplineRating[3].className = "fas fa-star";
            disciplineRating[2].className = "fas fa-star";
            disciplineRating[1].className = "fas fa-star";
            disciplineRating[0].className = "fas fa-star";
        }
    })
}

var coutRating = document.querySelectorAll('#cout_rating i');
for (let i = 0; i < 5; i++) {
    coutRating[i].addEventListener('click',()=>{
        if (i == 4) {
            coutRating[4].className = "fas fa-star";
            coutRating[3].className = "far fa-star";
            coutRating[2].className = "far fa-star";
            coutRating[1].className = "far fa-star";
            coutRating[0].className = "far fa-star";
        }
        else if (i == 3) {
            coutRating[4].className = "fas fa-star";
            coutRating[3].className = "fas fa-star";
            coutRating[2].className = "far fa-star";
            coutRating[1].className = "far fa-star";
            coutRating[0].className = "far fa-star";
        }
        else if (i == 2){
            coutRating[4].className = "fas fa-star";
            coutRating[3].className = "fas fa-star";
            coutRating[2].className = "fas fa-star";
            coutRating[1].className = "far fa-star";
            coutRating[0].className = "far fa-star";
        }
        else if (i == 1){
            coutRating[4].className = "fas fa-star";
            coutRating[3].className = "fas fa-star";
            coutRating[2].className = "fas fa-star";
            coutRating[1].className = "fas fa-star";
            coutRating[0].className = "far fa-star";
        }
        else if (i == 0){
            coutRating[4].className = "fas fa-star";
            coutRating[3].className = "fas fa-star";
            coutRating[2].className = "fas fa-star";
            coutRating[1].className = "fas fa-star";
            coutRating[0].className = "fas fa-star";
        }
    })
}

var reputationRating = document.querySelectorAll('#reputation_rating i');
for (let i = 0; i < 5; i++) {
    reputationRating[i].addEventListener('click',()=>{
        if (i == 4) {
            reputationRating[4].className = "fas fa-star";
            reputationRating[3].className = "far fa-star";
            reputationRating[2].className = "far fa-star";
            reputationRating[1].className = "far fa-star";
            reputationRating[0].className = "far fa-star";
        }
        else if (i == 3) {
            reputationRating[4].className = "fas fa-star";
            reputationRating[3].className = "fas fa-star";
            reputationRating[2].className = "far fa-star";
            reputationRating[1].className = "far fa-star";
            reputationRating[0].className = "far fa-star";
        }
        else if (i == 2){
            reputationRating[4].className = "fas fa-star";
            reputationRating[3].className = "fas fa-star";
            reputationRating[2].className = "fas fa-star";
            reputationRating[1].className = "far fa-star";
            reputationRating[0].className = "far fa-star";
        }
        else if (i == 1){
            reputationRating[4].className = "fas fa-star";
            reputationRating[3].className = "fas fa-star";
            reputationRating[2].className = "fas fa-star";
            reputationRating[1].className = "fas fa-star";
            reputationRating[0].className = "far fa-star";
        }
        else if (i == 0){
            reputationRating[4].className = "fas fa-star";
            reputationRating[3].className = "fas fa-star";
            reputationRating[2].className = "fas fa-star";
            reputationRating[1].className = "fas fa-star";
            reputationRating[0].className = "fas fa-star";
        }
    })
}
    

$(document).on('submit','.rat-comment-activite',function(event) {
    event.preventDefault(); 
    id = $(this).attr("id").split("_")[3];
    var fd = new FormData();

    var travailleRating = $('#activite_rating_bottom_'+id+' #travaille_rating i');
    let tr = 0; for (let i = 0; i < 5; i++) {if (travailleRating[i].className == "fas fa-star") {tr++;}}
    fd.append("travailleRating",tr*20);

    var rapiditeRating = $('#activite_rating_bottom_'+id+' #rapidite_rating i');
    let rr = 0; for (let i = 0; i < 5; i++) {if (rapiditeRating[i].className == "fas fa-star") {rr++;}}
    fd.append("rapiditeRating",rr*20);
    
    var coutRating = $('#activite_rating_bottom_'+id+' #cout_rating i');
    let cr = 0; for (let i = 0; i < 5; i++) {if (coutRating[i].className == "fas fa-star") {cr++;}}
    fd.append("coutRating",cr*20);

    var disciplineRating = $('#activite_rating_bottom_'+id+' #discipline_rating i');
    let dr = 0; for (let i = 0; i < 5; i++) {if (disciplineRating[i].className == "fas fa-star") {dr++;}}
    fd.append("disciplineRating",dr*20);

    var reputationRating = $('#activite_rating_bottom_'+id+' #reputation_rating i');
    let rrp = 0; for (let i = 0; i < 5; i++) {if (reputationRating[i].className == "fas fa-star") {rrp++;}}
    fd.append("reputationRating",rrp*20);

    var commentRating = $('#activite_rating_bottom_'+id+' #rat_comment_'+id).val();
    fd.append("comment_rating",commentRating);

    var idActivityRating = $('#activite_rating_bottom_'+id+' #id_activity_r_'+id).val();
    fd.append("id_activity",idActivityRating);

    var idUserRating = $('#activite_rating_bottom_'+id+' #id_user_r_'+id).val();
    fd.append("id_user_r",idUserRating);

    fd.append("id",id);
    
    console.log(commentRating+' '+idActivityRating+' '+idUserRating);
    
    $.ajax({
        url: 'rat-comment-activite.php',
        type: 'post',
        data: fd,
        contentType: false,
        processData: false,
        success: function(response){
            if(response != 0){
                $('#user_activity_bottom_'+id).nextAll('.user-activite-rating').remove();
                $('#user_activity_bottom_'+id).after(response);
            }else{
                alert('file not uploaded');
            }
        },
    });
});